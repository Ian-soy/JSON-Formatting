<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JSON格式化大师</title>
  <link rel="stylesheet" href="src/css/popup.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>JSON格式化大师</h1>
      <div class="theme-toggle">
        <span class="theme-label">主题</span>
        <select id="theme-selector">
          <option value="dark">暗黑</option>
          <option value="light">明亮</option>
          <option value="blue">蓝色</option>
          <option value="green">绿色</option>
        </select>
      </div>
    </div>
    
    <div class="toolbar">
      <button id="format-btn" class="btn primary">格式化</button>
      <button id="minify-btn" class="btn secondary">压缩</button>
      <button id="fix-btn" class="btn secondary">修复</button>
      <button id="copy-btn" class="btn secondary">复制</button>
      <button id="share-btn" class="btn secondary">分享</button>
      <button id="to-api-btn" class="btn secondary">转API</button>
      
      <div class="font-size-control">
        <button id="font-decrease" class="btn icon">A-</button>
        <span id="font-size-display">14px</span>
        <button id="font-increase" class="btn icon">A+</button>
      </div>
    </div>
    
    <div class="editor-container">
      <textarea id="json-input" placeholder="在此粘贴JSON数据..."></textarea>
    </div>
    
    <div class="status-bar">
      <span id="status-message">准备就绪</span>
      <span id="char-count">0 字符</span>
    </div>
    
    <div id="api-modal" class="modal">
      <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2>FastAPI接口</h2>
        <div class="api-info">
          <p>API服务器状态: <span id="api-status">未启动</span></p>
          <button id="start-api-btn" class="btn primary">启动API服务</button>
          <button id="stop-api-btn" class="btn secondary" disabled>停止API服务</button>
        </div>
        <div class="api-endpoint">
          <p>接口地址: <span id="api-url">http://localhost:8000/json-data</span></p>
          <button id="copy-api-url" class="btn secondary">复制地址</button>
          <button id="open-api-docs" class="btn secondary">打开API文档</button>
        </div>
      </div>
    </div>
    
    <div id="share-modal" class="modal">
      <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2>分享JSON数据</h2>
        <div class="share-options">
          <input type="text" id="share-link" readonly>
          <button id="copy-share-link" class="btn primary">复制链接</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- 工具模块 -->
  <script src="src/js/json-utils.js"></script>
  <script src="src/js/theme-manager.js"></script>
  <script src="src/js/font-manager.js"></script>
  <script src="src/js/share-manager.js"></script>
  <script src="src/js/error-handler.js"></script>
  <script src="src/js/performance-optimizer.js"></script>
  <script src="src/js/api-handler.js"></script>
  
  <!-- 主应用脚本 -->
  <script src="src/js/popup.js"></script>
</body>
</html>